---
layout: post
title: Why use a service mesh? A few arguments
description: "Kubernetes is THE topic of discussions in IT now. I would argue that it is only an intermediate step."
modified: 2019-07-30
tags: [kubernetes, k8s, service mesh, architecture]
image:
  feature: data/2019-07-29-Why-use-a-service-mesh-a-few-arguments/logo.jpg
---

https://www.8bitmen.com/what-database-does-facebook-use-a-1000-feet-deep-dive/

Key takeways:

- SQL is the king and can be scalled with proper sharding. It is awesome for being the single point of truth.
- polyglot persitence - > use a proper database for the job.
- even SQL databases have multiple flavors. Pick one that siuts your problem.
- the usage of a key-value database for implementing a message queue.
- cache all the things. Memcache is widelly used for caching data on multiple layersof the system.
- MySQL databases are used for transactional operations, while PrestoDB ( also a relational database) is used for massive querying.



https://medium.com/netflix-techblog/evolution-of-netflix-conductor-16600be36bca

- more and more companies see the need to orchestrate microservice with workflow engines

Things are not magic. Atlassian move to AWS.
https://www.atlassian.com/blog/technology/aws-scaling-multi-region-low-latency-service

- the same case as the facebook architecture. They are using a RDBS. Sharding is the answer to scalling.
- the use of CQRS for separation of conserns and separation of data stores
- the use of Amazon SNS (notification service) for scalling
- they initially were doing a 1/0 deployment, but this lead to new resources not being scalled properly and failing. This resulted in 5 minute outrages for the whole US. The obvious solution -> cannary deployments

https://medium.com/nikeengineering/moving-faster-with-aws-by-creating-an-event-stream-database-dedec8ca3eeb

- a interesting take solving a problem of high peak usage with event streams.

https://eng.uber.com/employing-quic-protocol/

Another example of the world rediscovering UDP. This time how Uber is moving from TCP to QUIC over UDP. Interesting case study with numbers.
A few benefits this move gave them:

- Reduction of security handshakes
- No head-of-line blocking of packages.
- QUIC delivery algorythm can be customized since it stays in the application level.
- Faster package loss recovery
- QUIC connection can be migrated between IP changes. Which is important taking into account how cell phones switch between WiFi and cellular connections.

How Slack architecture evolved.
https://stackshare.io/stack-history-timeline-slack-tech-stack-evolution

- Relational databases are is still present (MySQL and Presto)
- Polyglot persistence. Different databases for storing, searching and monitoring.


Video:
@Scale https://atscaleconference.com/videos-articles/
DSConf (Distributed Systems Conf) https://www.youtube.com/channel/UCL7eo0uzidPltfX6b8-4KYQ